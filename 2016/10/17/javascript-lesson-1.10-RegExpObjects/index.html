<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="劼哥舍"><title>《JavaScript 闯关记》之正则表达式 | 劼哥舍(＞﹏＜)</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">《JavaScript 闯关记》之正则表达式</h1><a id="logo" href="/.">劼哥舍(＞﹏＜)</a><p class="description">越简单越快乐，越努力越幸运...</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">《JavaScript 闯关记》之正则表达式</h1><div class="post-meta">Oct 17, 2016<span> | </span><span class="category"><a href="/categories/技术/">技术</a><a href="/categories/技术/JavaScript/">JavaScript</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#正则表达式的定义"><span class="toc-number">1.</span> <span class="toc-text">正则表达式的定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RegExp-实例属性"><span class="toc-number">2.</span> <span class="toc-text">RegExp 实例属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RegExp-实例方法"><span class="toc-number">3.</span> <span class="toc-text">RegExp 实例方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RegExp-构造函数属性"><span class="toc-number">4.</span> <span class="toc-text">RegExp 构造函数属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模式的局限性"><span class="toc-number">5.</span> <span class="toc-text">模式的局限性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#关卡"><span class="toc-number">6.</span> <span class="toc-text">关卡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更多"><span class="toc-number">7.</span> <span class="toc-text">更多</span></a></li></ol></div></div><div class="post-content"><blockquote>
<p>由于本课程的核心是 JavaScript，所以本文着重讲解了「正则表达式」在 JavaScript 中的用法，并未深入「正则表达式」的具体细节。如果您尚不了解「正则表达式」，强烈推荐您先学习 <strong>正则表达式30分钟入门教程 <a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="external">http://deerchao.net/tutorials/regex/regex.htm</a></strong> 之后，再进行本课程的学习。</p>
</blockquote>
<p>正则表达式（regular expression）是一个描述字符模式的对象，使用正则表达式可以进行强大的模式匹配和文本检索与替换功能。JavaScript 的正则表达式语法是 Perl5 的正则表达式语法的大型子集，所以对于有 Perl 编程经验的程序员来说，学习 JavaScript 中的正则表达式是小菜一碟。</p>
<h2 id="正则表达式的定义"><a href="#正则表达式的定义" class="headerlink" title="正则表达式的定义"></a>正则表达式的定义</h2><p>JavaScript 中的正则表达式用 <code>RegExp</code> 对象表示，可以使用 <code>RegExp()</code> 构造函数来创建 <code>RegExp</code> 对象，不过 <code>RegExp</code> 对象更多是通过字面量的语法来创建，使用下面类似 Perl 的语法，就可以创建一个正则表达式。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 推荐写法</span></div><div class="line"><span class="keyword">var</span> expression = <span class="regexp">/ pattern /</span> flags ;</div><div class="line"></div><div class="line"><span class="comment">// 不推荐写法</span></div><div class="line"><span class="keyword">var</span> expression = <span class="keyword">new</span> <span class="built_in">RegExp</span>(pattern, flags);</div></pre></td></tr></table></figure>
<a id="more"></a> 
<p>其中的模式（pattern）部分，是包含在一对斜杠 <code>/</code> 之间的字符，可以是任何简单或复杂的正则表达式，可以包含字符类、限定符、分组、向前查找以及反向引用。每个正则表达式都可带有一或多个标志（flags），用以标明正则表达式的行为。正则表达式的匹配模式支持下列3个标志。</p>
<ul>
<li><code>g</code>：表示全局（global）模式，即模式将被应用于所有字符串，而非在发现第一个匹配项时立即停止；</li>
<li><code>i</code>：表示不区分大小写（case-insensitive）模式，即在确定匹配项时忽略模式与字符串的大小写；</li>
<li><code>m</code>：表示多行（multiline）模式，即在到达一行文本末尾时还会继续查找下一行中是否存在与模式匹配的项。</li>
</ul>
<p>因此，一个正则表达式就是一个模式与上述3个标志的组合体。不同组合产生不同结果，如下面的例子所示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 匹配字符串中所有"at"的实例</span></div><div class="line"><span class="keyword">var</span> pattern1 = <span class="regexp">/at/g</span>;</div><div class="line"></div><div class="line"><span class="comment">// 匹配第一个"bat"或"cat"，不区分大小写</span></div><div class="line"><span class="keyword">var</span> pattern2 = <span class="regexp">/[bc]at/i</span>;</div><div class="line"></div><div class="line"><span class="comment">// 匹配所有以"at"结尾的3个字符的组合，不区分大小写</span></div><div class="line"><span class="keyword">var</span> pattern3 = <span class="regexp">/.at/gi</span>;</div></pre></td></tr></table></figure>
<p>与其他语言中的正则表达式类似，模式中使用的所有元字符都必须转义。正则表达式中的元字符包括：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">( [ &#123; \ ^ $ | ) ? * + . ] &#125;</div></pre></td></tr></table></figure>
<p>这些元字符在正则表达式中都有一或多种特殊用途，因此如果想要匹配字符串中包含的这些字符，就必须对它们进行转义。下面给出几个例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 匹配第一个"bat"或"cat"，不区分大小写</span></div><div class="line"><span class="keyword">var</span> pattern1 = <span class="regexp">/[bc]at/i</span>;</div><div class="line"></div><div class="line"><span class="comment">// 匹配第一个" [bc]at"，不区分大小写</span></div><div class="line"><span class="keyword">var</span> pattern2 = <span class="regexp">/\[bc\]at/i</span>;</div><div class="line"></div><div class="line"><span class="comment">// 匹配所有以"at"结尾的3个字符的组合，不区分大小写</span></div><div class="line"><span class="keyword">var</span> pattern3 = <span class="regexp">/.at/gi</span>;</div><div class="line"></div><div class="line"><span class="comment">// 匹配所有".at"，不区分大小写</span></div><div class="line"><span class="keyword">var</span> pattern4 = <span class="regexp">/\.at/gi</span>;</div></pre></td></tr></table></figure>
<h2 id="RegExp-实例属性"><a href="#RegExp-实例属性" class="headerlink" title="RegExp 实例属性"></a><code>RegExp</code> 实例属性</h2><p><code>RegExp</code> 的每个实例都具有下列属性，通过这些属性可以取得有关模式的各种信息。</p>
<ul>
<li><code>global</code>：布尔值，表示是否设置了 <code>g</code> 标志。</li>
<li><code>ignoreCase</code>：布尔值，表示是否设置了 <code>i</code> 标志。</li>
<li><code>lastIndex</code>：整数，表示开始搜索下一个匹配项的字符位置，从0算起。</li>
<li><code>multiline</code>：布尔值，表示是否设置了 <code>m</code> 标志。</li>
<li><code>source</code>：正则表达式的字符串表示，按照字面量形式而非传入构造函数中的字符串模式返回。</li>
</ul>
<p>通过这些属性可以获知一个正则表达式的各方面信息，但却没有多大用处，因为这些信息全都包含在模式声明中。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> pattern1 = <span class="regexp">/\[bc\]at/i</span>;</div><div class="line"><span class="built_in">console</span>.log(pattern1.global);         <span class="comment">// false</span></div><div class="line"><span class="built_in">console</span>.log(pattern1.ignoreCase);     <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(pattern1.multiline);      <span class="comment">// false</span></div><div class="line"><span class="built_in">console</span>.log(pattern1.lastIndex);      <span class="comment">// 0</span></div><div class="line"><span class="built_in">console</span>.log(pattern1.source);         <span class="comment">// "\[bc\]at"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> pattern2 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\[bc\\]at"</span>, <span class="string">"i"</span>);</div><div class="line"><span class="built_in">console</span>.log(pattern2.global);         <span class="comment">// false</span></div><div class="line"><span class="built_in">console</span>.log(pattern2.ignoreCase);     <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(pattern2.multiline);      <span class="comment">// false</span></div><div class="line"><span class="built_in">console</span>.log(pattern2.lastIndex);      <span class="comment">// 0</span></div><div class="line"><span class="built_in">console</span>.log(pattern2.source);         <span class="comment">// "\[bc\]at"</span></div></pre></td></tr></table></figure>
<p>我们注意到，尽管第一个模式使用的是字面量，第二个模式使用了 <code>RegExp</code> 构造函数，但它们的 <code>source</code> 属性是相同的。可见，<code>source</code> 属性保存的是规范形式的字符串，即字面量形式所用的字符串。</p>
<h2 id="RegExp-实例方法"><a href="#RegExp-实例方法" class="headerlink" title="RegExp 实例方法"></a><code>RegExp</code> 实例方法</h2><p><code>RegExp</code> 对象的主要方法是 <code>exec()</code>，该方法是专门为捕获组而设计的。<code>exec()</code> 接受一个参数，即要应用模式的字符串，然后返回包含第一个匹配项信息的数组；或者在没有匹配项的情况下返回 <code>null</code>。返回的数组虽然是 <code>Array</code> 的实例，但包含两个额外的属性：<code>index</code> 和 <code>input</code>。其中，<code>index</code> 表示匹配项在字符串中的位置，而 <code>input</code> 表示应用正则表达式的字符串。在数组中，第一项是与整个模式匹配的字符串，其他项是与模式中的捕获组匹配的字符串（如果模式中没有捕获组，则该数组只包含一项）。请看下面的例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> text = <span class="string">"mom and dad and baby"</span>;</div><div class="line"><span class="keyword">var</span> pattern = <span class="regexp">/mom( and dad( and baby)?)?/gi</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> matches = pattern.exec(text);</div><div class="line"><span class="built_in">console</span>.log(matches.index);     <span class="comment">// 0</span></div><div class="line"><span class="built_in">console</span>.log(matches.input);     <span class="comment">// "mom and dad and baby"</span></div><div class="line"><span class="built_in">console</span>.log(matches[<span class="number">0</span>]);        <span class="comment">// "mom and dad and baby"</span></div><div class="line"><span class="built_in">console</span>.log(matches[<span class="number">1</span>]);        <span class="comment">// " and dad and baby"</span></div><div class="line"><span class="built_in">console</span>.log(matches[<span class="number">2</span>]);        <span class="comment">// " and baby"</span></div></pre></td></tr></table></figure>
<p>这个例子中的模式包含两个捕获组。最内部的捕获组匹配 <code>&quot;and baby&quot;</code>，而包含它的捕获组匹配 <code>&quot;and dad&quot;</code> 或者 <code>&quot;and dad and baby&quot;</code>。当把字符串传入 <code>exec()</code> 方法中之后，发现了一个匹配项。因为整个字符串本身与模式匹配，所以返回的数组 <code>matchs</code> 的 <code>index</code> 属性值为 <code>0</code>。数组中的第一项是匹配的整个字符串，第二项包含与第一个捕获组匹配的内容，第三项包含与第二个捕获组匹配的内容。</p>
<p>对于 <code>exec()</code> 方法而言，即使在模式中设置了全局标志 <code>g</code>，它每次也只会返回一个匹配项。在不设置全局标志的情况下，在同一个字符串上多次调用 <code>exec()</code> 将始终返回第一个匹配项的信息。而在设置全局标志的情况下，每次调用 <code>exec()</code> 则都会在字符串中继续查找新匹配项，如下面的例子所示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> text = <span class="string">"cat, bat, sat, fat"</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> pattern1 = <span class="regexp">/.at/</span>;</div><div class="line"></div><div class="line"><span class="comment">// 非全局模式，第一次匹配</span></div><div class="line"><span class="keyword">var</span> matches = pattern1.exec(text);</div><div class="line"><span class="built_in">console</span>.log(matches.index);        <span class="comment">// 0</span></div><div class="line"><span class="built_in">console</span>.log(matches[<span class="number">0</span>]);           <span class="comment">// cat</span></div><div class="line"><span class="built_in">console</span>.log(pattern1.lastIndex);   <span class="comment">// 0</span></div><div class="line"></div><div class="line"><span class="comment">// 非全局模式，第二次匹配</span></div><div class="line">matches = pattern1.exec(text);</div><div class="line"><span class="built_in">console</span>.log(matches.index);        <span class="comment">// 0</span></div><div class="line"><span class="built_in">console</span>.log(matches[<span class="number">0</span>]);           <span class="comment">// cat</span></div><div class="line"><span class="built_in">console</span>.log(pattern1.lastIndex);   <span class="comment">// 0</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> pattern2 = <span class="regexp">/.at/g</span>;</div><div class="line"></div><div class="line"><span class="comment">// 全局模式，第一次匹配</span></div><div class="line"><span class="keyword">var</span> matches = pattern2.exec(text);</div><div class="line"><span class="built_in">console</span>.log(matches.index);        <span class="comment">// 0</span></div><div class="line"><span class="built_in">console</span>.log(matches[<span class="number">0</span>]);           <span class="comment">// cat</span></div><div class="line"><span class="built_in">console</span>.log(pattern2.lastIndex);   <span class="comment">// 0</span></div><div class="line"></div><div class="line"><span class="comment">// 全局模式，第二次匹配</span></div><div class="line">matches = pattern2.exec(text);</div><div class="line"><span class="built_in">console</span>.log(matches.index);        <span class="comment">// 5</span></div><div class="line"><span class="built_in">console</span>.log(matches[<span class="number">0</span>]);           <span class="comment">// bat</span></div><div class="line"><span class="built_in">console</span>.log(pattern2.lastIndex);   <span class="comment">// 8</span></div></pre></td></tr></table></figure>
<p>这个例子中的第一个模式 <code>pattern1</code> 不是全局模式，因此每次调用 <code>exec()</code> 返回的都是第一个匹配项 <code>&quot;cat&quot;</code>。而第二个模式 <code>pattern2</code> 是全局模式，因此每次调用 <code>exec()</code> 都会返回字符串中的下一个匹配项，直至搜索到字符串末尾为止。此外，还应该注意模式的 <code>lastIndex</code> 属性的变化情况。在全局匹配模式下，<code>lastIndex</code> 的值在每次调用 <code>exec()</code> 后都会增加，而在非全局模式下则始终保持不变。</p>
<blockquote>
<p>IE 的 JavaScript 实现在 <code>lastIndex</code> 属性上存在偏差，即使在非全局模式下，<code>lastIndex</code> 属性每次也会变化。</p>
</blockquote>
<p>正则表达式的第二个方法是 <code>test()</code>，它接受一个字符串参数。在模式与该参数匹配的情况下返回 <code>true</code>；否则，返回 <code>false</code>。在只想知道目标字符串与某个模式是否匹配，但不需要知道其文本内容的情况下，使用这个方法非常方便。因此，<code>test()</code> 方法经常被用在 <code>if</code> 语句中，如下面的例子所示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> text = <span class="string">"000-00-0000"</span>;</div><div class="line"><span class="keyword">var</span> pattern = <span class="regexp">/\d&#123;3&#125;-\d&#123;2&#125;-\d&#123;4&#125;/</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (pattern.test(text))&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"The pattern was matched."</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在这个例子中，我们使用正则表达式来测试了一个数字序列。如果输入的文本与模式匹配，则显示一条消息。这种用法经常出现在验证用户输入的情况下，因为我们只想知道输入是不是有效，至于它为什么无效就无关紧要了。</p>
<p><code>RegExp</code> 实例继承的 <code>toLocaleString()</code> 和 <code>toString()</code> 方法都会返回正则表达式的字面量，与创建正则表达式的方式无关。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> pattern = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\[bc\\]at"</span>, <span class="string">"gi"</span>);</div><div class="line"><span class="built_in">console</span>.log(pattern.toString());             <span class="comment">// /\[bc\]at/gi</span></div><div class="line"><span class="built_in">console</span>.log(pattern.toLocaleString());       <span class="comment">// /\[bc\]at/gi</span></div></pre></td></tr></table></figure>
<p>即使上例中的模式是通过调用 <code>RegExp</code> 构造函数创建的，但 <code>toLocaleString()</code> 和 <code>toString()</code> 方法仍然会像它是以字面量形式创建的一样显示其字符串表示。</p>
<h2 id="RegExp-构造函数属性"><a href="#RegExp-构造函数属性" class="headerlink" title="RegExp 构造函数属性"></a><code>RegExp</code> 构造函数属性</h2><p><code>RegExp</code> 构造函数包含一些属性（这些属性在其他语言中被看成是静态属性）。这些属性适用于作用域中的所有正则表达式，并且基于所执行的最近一次正则表达式操作而变化。关于这些属性的另一个独特之处，就是可以通过两种方式访问它们。换句话说，这些属性分别有一个长属性名和一个短属性名（Opera是例外，它不支持短属性名）。下表列出了RegExp构造函数的属性。</p>
<table>
<thead>
<tr>
<th>长属性名</th>
<th>短属性名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<p>input | $_ | 最近一次要匹配的字符串。Opera未实现此属性。<br>lastMatch | $&amp; | 最近一次的匹配项。Opera未实现此属性。<br>lastParen | $+ | 最近一次匹配的捕获组。Opera未实现此属性。<br>leftContext | $` | input字符串中lastMatch之前的文本。<br>multiline | $* | 布尔值，表示是否所有表达式都使用多行模式。IE和Opera未实现此属性。<br>rightContext | $’ | Input字符串中lastMatch之后的文本。</p>
<p>使用这些属性可以从 <code>exec()</code> 或 <code>test()</code> 执行的操作中提取出更具体的信息。请看下面的例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> text = <span class="string">"this has been a short summer"</span>;</div><div class="line"><span class="keyword">var</span> pattern = <span class="regexp">/(.)hort/g</span>;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"> * 注意：Internet Explorer 不支持 multiline 属性</div><div class="line"> * Opera 不支持 input、lastMatch、lastParen 和 multiline 属性</div><div class="line"> */</div><div class="line"><span class="keyword">if</span> (pattern.test(text))&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.input);          <span class="comment">// this has been a short summer</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.leftContext);    <span class="comment">// this has been a</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.rightContext);   <span class="comment">// summer</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.lastMatch);      <span class="comment">// short</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.lastParen);      <span class="comment">// s</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.multiline);      <span class="comment">// false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如前所述，例子使用的长属性名都可以用相应的短属性名来代替。只不过，由于这些短属性名大都不是有效的 JavaScript 标识符，因此必须通过方括号语法来访问它们，如下所示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> text = <span class="string">"this has been a short summer"</span>;</div><div class="line"><span class="keyword">var</span> pattern = <span class="regexp">/(.)hort/g</span>;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"> * 注意：Internet Explorer 不支持 multiline 属性</div><div class="line"> * Opera 不支持 input、lastMatch、lastParen 和 multiline 属性</div><div class="line"> */</div><div class="line"><span class="keyword">if</span> (pattern.test(text))&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$_);      <span class="comment">// this has been a short summer</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>[<span class="string">"$`"</span>]);   <span class="comment">// this has been a</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>[<span class="string">"$'"</span>]);   <span class="comment">// summer</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>[<span class="string">"$&amp;"</span>]);   <span class="comment">// short</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>[<span class="string">"$+"</span>]);   <span class="comment">// s</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>[<span class="string">"$*"</span>]);   <span class="comment">// false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>除了上面介绍的几个属性之外，还有多达9个用于存储捕获组的构造函数属性。访问这些属性的语法是 <code>RegExp.$1</code>、<code>RegExp.$2</code>…<code>RegExp.$9</code>，分别用于存储第一、第二…第九个匹配的捕获组。在调用 <code>exec()</code> 或 <code>test()</code> 方法时，这些属性会被自动填充。然后，我们就可以像下面这样来使用它们。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> text = <span class="string">"this has been a short summer"</span>;</div><div class="line"><span class="keyword">var</span> pattern = <span class="regexp">/(..)or(.)/g</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (pattern.test(text))&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">1</span>);  <span class="comment">// sh</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">2</span>);  <span class="comment">// t</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里创建了一个包含两个捕获组的模式，并用该模式测试了一个字符串。即使 <code>test()</code> 方法只返回一个布尔值，但 <code>RegExp</code> 构造函数的属性 <code>$1</code> 和 <code>$2</code> 也会被匹配相应捕获组的字符串自动填充。</p>
<h2 id="模式的局限性"><a href="#模式的局限性" class="headerlink" title="模式的局限性"></a>模式的局限性</h2><p>尽管 JavaScript 中的正则表达式功能还是比较完备的，但仍然缺少某些语言（特别是 Perl）所支持的高级正则表达式特性。下面列出了 JavaScript 正则表达式所不支持的特性。</p>
<ul>
<li>匹配字符串开始和结尾的\A和\Z锚</li>
<li>向后查找（lookbehind）</li>
<li>并集和交集类</li>
<li>原子组（atomic grouping）</li>
<li>Unicode支持（单个字符除外，如\uFFFF）</li>
<li>命名的捕获组</li>
<li>s（single，单行）和x（free-spacing，无间隔）匹配模式</li>
<li>条件匹配</li>
<li>正则表达式注释</li>
</ul>
<p>即使存在这些限制，JavaScript 正则表达式仍然是非常强大的，能够帮我们完成绝大多数模式匹配任务。</p>
<h2 id="关卡"><a href="#关卡" class="headerlink" title="关卡"></a>关卡</h2><p>按要求完成下列常用的正则表达式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 挑战一：数字</span></div><div class="line"><span class="keyword">var</span> pattern1 = <span class="literal">null</span>;  <span class="comment">// 补全该正则表达式</span></div><div class="line"><span class="built_in">console</span>.log(pattern1.test(<span class="string">'123'</span>)); <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(pattern1.test(<span class="string">'abc'</span>)); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 挑战二：3位的数字</span></div><div class="line"><span class="keyword">var</span> pattern2 = <span class="literal">null</span>;  <span class="comment">// 补全该正则表达式</span></div><div class="line"><span class="built_in">console</span>.log(pattern2.test(<span class="string">'123'</span>));  <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(pattern2.test(<span class="string">'1234'</span>)); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 挑战三：至少3位的数字</span></div><div class="line"><span class="keyword">var</span> pattern3 = <span class="literal">null</span>;  <span class="comment">// 补全该正则表达式</span></div><div class="line"><span class="built_in">console</span>.log(pattern3.test(<span class="string">'1234'</span>)); <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(pattern3.test(<span class="string">'12'</span>));   <span class="comment">// false</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 挑战四：3-5位的数字</span></div><div class="line"><span class="keyword">var</span> pattern4 = <span class="literal">null</span>;  <span class="comment">// 补全该正则表达式</span></div><div class="line"><span class="built_in">console</span>.log(pattern4.test(<span class="string">'1234'</span>)); <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(pattern4.test(<span class="string">'1'</span>));    <span class="comment">// false</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 挑战五：由26个英文字母组成的字符串</span></div><div class="line"><span class="keyword">var</span> pattern5 = <span class="literal">null</span>;  <span class="comment">// 补全该正则表达式</span></div><div class="line"><span class="built_in">console</span>.log(pattern5.test(<span class="string">'abc'</span>));  <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(pattern5.test(<span class="string">'1abc'</span>)); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 挑战六：由数字和26个英文字母组成的字符串</span></div><div class="line"><span class="keyword">var</span> pattern6 = <span class="literal">null</span>;  <span class="comment">// 补全该正则表达式</span></div><div class="line"><span class="built_in">console</span>.log(pattern6.test(<span class="string">'1abc'</span>));  <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(pattern6.test(<span class="string">'_abc'</span>));  <span class="comment">// false</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 挑战七：日期格式：年-月-日</span></div><div class="line"><span class="keyword">var</span> pattern7 = <span class="literal">null</span>;  <span class="comment">// 补全该正则表达式</span></div><div class="line"><span class="built_in">console</span>.log(pattern7.test(<span class="string">'2016-08-20'</span>));  <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(pattern7.test(<span class="string">'2016/08/20'</span>));  <span class="comment">// false</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 挑战八：时间格式：小时:分钟, 24小时制</span></div><div class="line"><span class="keyword">var</span> pattern8 = <span class="literal">null</span>;  <span class="comment">// 补全该正则表达式</span></div><div class="line"><span class="built_in">console</span>.log(pattern8.test(<span class="string">'13:45'</span>));  <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(pattern8.test(<span class="string">'13点45'</span>)); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 挑战九：中国大陆身份证号，15位或18位</span></div><div class="line"><span class="keyword">var</span> pattern9 = <span class="literal">null</span>;  <span class="comment">// 补全该正则表达式</span></div><div class="line"><span class="built_in">console</span>.log(pattern9.test(<span class="string">'4223222199901090033'</span>));  <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(pattern9.test(<span class="string">'asdfasdfasfasdf1234'</span>));  <span class="comment">// false</span></div></pre></td></tr></table></figure>
<h2 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h2><blockquote>
<p>关注微信公众号「劼哥舍」回复「答案」，获取关卡详解。<br>关注 <a href="https://github.com/stone0090/javascript-lessons" target="_blank" rel="external">https://github.com/stone0090/javascript-lessons</a>，获取最新动态。</p>
</blockquote>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://shijiajie.com/2016/10/17/javascript-lesson-1.10-RegExpObjects/" data-id="cj26apfxh001f5s51pshv7whe" class="article-share-link">分享到</a><div class="tags"><a href="/tags/JavaScript/">JavaScript</a><a href="/tags/《JavaScript-闯关记》/">《JavaScript 闯关记》</a></div><div class="post-nav"><a href="/2016/10/12/javascript-lesson-1.9-FunctionObjects/" class="pre">《JavaScript 闯关记》之函数</a><a href="/2016/10/26/javascript-lesson-1.11-PrimitiveWrapperObjects/" class="next">《JavaScript 闯关记》之基本包装类型</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/stone0090" title="我的「GitHub」" target="_blank">我的「GitHub」</a><ul></ul><a href="http://qiniu.shijiajie.com/weixin/xiaomiquan.jpg" title="我的「小密圈」" target="_blank">我的「小密圈」</a><ul></ul><a href="http://qiniu.shijiajie.com/weixin/qrcode_for_gh_48ef95800cf5_430.jpg" title="我的「微信公众号」" target="_blank">我的「微信公众号」</a><ul></ul><a href="http://weibo.com/605494869" title="我的「微博」" target="_blank">我的「微博」</a><ul></ul><a href="https://www.zhihu.com/people/stone0090" title="我的「知乎」" target="_blank">我的「知乎」</a><ul></ul><a href="http://www.jianshu.com/u/0005893eaff9" title="我的「简书」" target="_blank">我的「简书」</a><ul></ul><a href="https://juejin.im/user/57b83a6fa633bd0066590d37" title="我的「掘金」" target="_blank">我的「掘金」</a><ul></ul><a href="http://www.cnblogs.com/shi0090" title="我的「博客园」" target="_blank">我的「博客园」</a><ul></ul><a href="http://blog.csdn.net/shi0090" title="我的「CSDN」" target="_blank">我的「CSDN」</a><ul></ul><a href="https://segmentfault.com/u/stone0090" title="我的「SegmentFault」" target="_blank">我的「SegmentFault」</a></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/NET/">.NET</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/NET/">.NET</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/DSOframer/">DSOframer</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/算法/">算法</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件/">软件</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/软件/Parallels/">Parallels</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件/VMware/">VMware</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/心情随笔/">心情随笔</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/读书笔记/">读书笔记</a></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/原型链/" style="font-size: 15px;">原型链</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/ASP-NET/" style="font-size: 15px;">ASP.NET</a> <a href="/tags/NET/" style="font-size: 15px;">.NET</a> <a href="/tags/Amaze-UI/" style="font-size: 15px;">Amaze UI</a> <a href="/tags/开源项目/" style="font-size: 15px;">开源项目</a> <a href="/tags/Excel/" style="font-size: 15px;">Excel</a> <a href="/tags/C/" style="font-size: 15px;">C#</a> <a href="/tags/Socket/" style="font-size: 15px;">Socket</a> <a href="/tags/断点续传/" style="font-size: 15px;">断点续传</a> <a href="/tags/Visual-Studio/" style="font-size: 15px;">Visual Studio</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/EasyUI/" style="font-size: 15px;">EasyUI</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/DSOframer/" style="font-size: 15px;">DSOframer</a> <a href="/tags/心情随笔/" style="font-size: 15px;">心情随笔</a> <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/float/" style="font-size: 15px;">float</a> <a href="/tags/position/" style="font-size: 15px;">position</a> <a href="/tags/样式布局分享/" style="font-size: 15px;">样式布局分享</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/landscape-plus/" style="font-size: 15px;">landscape-plus</a> <a href="/tags/frozen-js/" style="font-size: 15px;">frozen.js</a> <a href="/tags/zepto/" style="font-size: 15px;">zepto</a> <a href="/tags/编程珠玑/" style="font-size: 15px;">编程珠玑</a> <a href="/tags/prototype/" style="font-size: 15px;">prototype</a> <a href="/tags/《JavaScript-闯关记》/" style="font-size: 15px;">《JavaScript 闯关记》</a> <a href="/tags/《编写可维护的JavaScript》/" style="font-size: 15px;">《编写可维护的JavaScript》</a> <a href="/tags/basevalidate-js/" style="font-size: 15px;">basevalidate.js</a> <a href="/tags/微信公众号/" style="font-size: 15px;">微信公众号</a> <a href="/tags/tab-js/" style="font-size: 15px;">tab.js</a> <a href="/tags/Node-js/" style="font-size: 15px;">Node.js</a> <a href="/tags/MicroBlog/" style="font-size: 15px;">MicroBlog</a> <a href="/tags/Node-js开发指南/" style="font-size: 15px;">Node.js开发指南</a> <a href="/tags/DOC转图片/" style="font-size: 15px;">DOC转图片</a> <a href="/tags/PDF转图片/" style="font-size: 15px;">PDF转图片</a> <a href="/tags/读书笔记/" style="font-size: 15px;">读书笔记</a> <a href="/tags/专栏精粹/" style="font-size: 15px;">专栏精粹</a> <a href="/tags/时间管理/" style="font-size: 15px;">时间管理</a> <a href="/tags/Mac/" style="font-size: 15px;">Mac</a> <a href="/tags/虚拟机/" style="font-size: 15px;">虚拟机</a> <a href="/tags/Parallels/" style="font-size: 15px;">Parallels</a> <a href="/tags/VMware/" style="font-size: 15px;">VMware</a> <a href="/tags/Windows-10/" style="font-size: 15px;">Windows 10</a> <a href="/tags/Boot-Camp/" style="font-size: 15px;">Boot Camp</a> <a href="/tags/微信小程序/" style="font-size: 15px;">微信小程序</a> <a href="/tags/阿里影业/" style="font-size: 15px;">阿里影业</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">劼哥舍(＞﹏＜).</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>